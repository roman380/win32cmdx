<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>win32cmdx: zipdump.exe - dump zip file structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="contents">


<h1><a class="anchor" id="zipdump-manual">zipdump.exe - dump zip file structure </a></h1><dl class="version"><dt><b>Version:</b></dt><dd>1.1 (r33)</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Hiroshi Kuno &lt;<a href="http://code.google.com/p/win32cmdx/">http://code.google.com/p/win32cmdx/</a>&gt;</dd></dl>
<dl class="user"><dt><b>License:</b></dt><dd>New BSD License <br/>
Copyright &copy; 2010 by Hiroshi Kuno <br/>
本ソフトウェアは無保証かつ無償で提供します。利用、再配布、改変は自由です。</dd></dl>
<hr/>
 <h2><a class="anchor" id="intro">
はじめに</a></h2>
<p>zipdumpは、ZIPファイルの構造をダンプ出力するコンソールアプリケーションです。 壊れたZIPファイルの解析に便利です。</p>
<h2><a class="anchor" id="func">
特徴</a></h2>
<ul>
<li>PKZIP APPNOTE.TXT Version 6.3.2[September 28, 2007] のファイルフォーマット仕様に基づき、構造単位でのダンプを行います。</li>
<li>対象ZIPファイル名に ".zipdump.txt" を付加した名前のテキストファイルを生成し、ダンプ結果を出力します。</li>
</ul>
<h2><a class="anchor" id="env">
動作環境</a></h2>
<p>Windows2000以降を動作対象としています。 WindowsXP にて動作確認済み。</p>
<h2><a class="anchor" id="install">
インストール方法</a></h2>
<p>配布ファイル zipdump.exe を、PATHが通ったフォルダにコピーしてください。 アインインストールするには、そのコピーしたファイルを削除してください。</p>
<h2><a class="anchor" id="usage">
使い方</a></h2>
<div class="fragment"><pre class="fragment">usage :zipdump [-h?fqosr] [-d&lt;DIR&gt;] file1.zip file2.zip ...
  version 1.1 (r33)
  -h -?      this help
  -f         full dump
  -q         quiet mode
  -o         omit same hexdump line
  -s         output to stdout instend of files(*.zipdump.txt)
  -r         recursive search under the input-file's folder(wildcard needed)
  -d&lt;DIR&gt;    output to DIR
  fileN.cpp  input-files. wildcard OK
</pre></div><h2><a class="anchor" id="example">
出力例</a></h2>
<div class="fragment"><pre class="fragment">zipdump -s test.zip 
&lt;&lt;&lt; test.zip &gt;&gt;&gt; begin.
*** zipdump of "test.zip" ***

[Local file header #1] offset : 0(0x0000000000000000)
                header signature : 0x04034B50
       version needed to extract : 20
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x8B24
              last mod file date : 0x3B43
                                 * 2009-10-03T17:25:08
                          crc-32 : 0xE02D4FB6
                 compressed size : 126(0x0000007E)
               uncompressed size : 139(0x0000008B)
                file name length : 15(0x000F)
              extra field length : 122(0x007A)

[Local file name #1] offset : 30(0x000000000000001E)
version-filt.pl

[Local extra field #1] offset : 45(0x000000000000002D)
ID : 0x4453, size : 101(0x0065)
+00000000 : BC 00 00 00 00 08 00 FE-E7 B7 29 63 64 60 69 10 :..........)cd`i.
+00000010 : 61 60 60 30 60 80 00 1F-20 66 64 05 33 59 45 81 :a``0`... fd.3YE.
+00000020 : 44 94 10 DB 91 8D 1C FF-99 8F 5A 14 E5 BE 63 C6 :D.........Z...c.
+00000030 : 2D C7 C8 C4 C0 C0 C4 50-C0 C0 02 96 96 60 F8 CF :-......P.....`..
+00000040 : 28 CF 00 12 03 A9 55 00-12 0A 60 B6 08 44 9C 11 :(.....U...`..D..
+00000050 : 22 2E 04 A6 54 20 62 78-EC 04 99 B7 92 41 08 C5 :"...T bx.....A..
+00000060 : 3C 45 20 1B 00                                  :&lt;E ..           
ID : 0x5455, size : 13(0x000D)
+00000000 : 07 64 0A C7 4A 81 C7 55-4B A8 E7 D9 4A          :.d..J..UK...J   

[File data #1] offset : 167(0x00000000000000A7)
; skip file data(126 bytes), use -f option to dump the data

[Local file header #2] offset : 293(0x0000000000000125)
                header signature : 0x04034B50
       version needed to extract : 20
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0xBB9C
              last mod file date : 0x3B43
                                 * 2009-10-03T23:28:56
                          crc-32 : 0x6E1AD785
                 compressed size : 414(0x0000019E)
               uncompressed size : 802(0x00000322)
                file name length : 13(0x000D)
              extra field length : 122(0x007A)

[Local file name #2] offset : 323(0x0000000000000143)
version-up.pl

[Local extra field #2] offset : 336(0x0000000000000150)
ID : 0x4453, size : 101(0x0065)
+00000000 : BC 00 00 00 00 08 00 FE-E7 B7 29 63 64 60 69 10 :..........)cd`i.
+00000010 : 61 60 60 30 60 80 00 1F-20 66 64 05 33 59 45 81 :a``0`... fd.3YE.
+00000020 : 44 94 10 DB 91 8D 1C FF-99 8F 5A 14 E5 BE 63 C6 :D.........Z...c.
+00000030 : 2D C7 C8 C4 C0 C0 C4 50-C0 C0 02 96 96 60 F8 CF :-......P.....`..
+00000040 : 28 CF 00 12 03 A9 55 00-12 0A 60 B6 08 44 9C 11 :(.....U...`..D..
+00000050 : 22 2E 04 A6 54 20 62 78-EC 04 99 B7 92 41 08 C5 :"...T bx.....A..
+00000060 : 3C 45 20 1B 00                                  :&lt;E ..           
ID : 0x5455, size : 13(0x000D)
+00000000 : 07 A8 5F C7 4A 11 CA 55-4B A8 E7 D9 4A          :.._.J..UK...J   

[File data #2] offset : 458(0x00000000000001CA)
; skip file data(414 bytes), use -f option to dump the data

[Central file header #1] offset : 872(0x0000000000000368)
                header signature : 0x02014B50
                 version made by : 0x0B17
                                 * 11 - MVS (OS/390 - Z/OS) or NTFS(by Info-ZIP)
                                 * ver 2.3
       version needed to extract : 20
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x8B24
              last mod file date : 0x3B43
                                 * 2009-10-03T17:25:08
                          crc-32 : 0xE02D4FB6
                 compressed size : 126(0x0000007E)
               uncompressed size : 139(0x0000008B)
                file name length : 15(0x000F)
              extra field length : 17(0x0011)
             file comment length : 0(0x0000)
               disk number start : 0
        internal file attributes : 0x0001
                                 * text file
        external file attributes : 0x81B60020
 relative offset of local header : 0(0x00000000)

[file name #1] offset : 918(0x0000000000000396)
version-filt.pl

[extra field #1] offset : 933(0x00000000000003A5)
ID : 0x4453, size : 4(0x0004)
+00000000 : BC 00 00 00                                     :....            
ID : 0x5455, size : 5(0x0005)
+00000000 : 07 64 0A C7 4A                                  :.d..J           

[Central file header #2] offset : 950(0x00000000000003B6)
                header signature : 0x02014B50
                 version made by : 0x0B17
                                 * 11 - MVS (OS/390 - Z/OS) or NTFS(by Info-ZIP)
                                 * ver 2.3
       version needed to extract : 20
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0xBB9C
              last mod file date : 0x3B43
                                 * 2009-10-03T23:28:56
                          crc-32 : 0x6E1AD785
                 compressed size : 414(0x0000019E)
               uncompressed size : 802(0x00000322)
                file name length : 13(0x000D)
              extra field length : 17(0x0011)
             file comment length : 0(0x0000)
               disk number start : 0
        internal file attributes : 0x0001
                                 * text file
        external file attributes : 0x81B60020
 relative offset of local header : 293(0x00000125)

[file name #2] offset : 996(0x00000000000003E4)
version-up.pl

[extra field #2] offset : 1009(0x00000000000003F1)
ID : 0x4453, size : 4(0x0004)
+00000000 : BC 00 00 00                                     :....            
ID : 0x5455, size : 5(0x0005)
+00000000 : 07 A8 5F C7 4A                                  :.._.J           

[End of central directory record] offset : 1026(0x0000000000000402)
                header signature : 0x06054B50
             number of this disk : 0
number of the disk with the start of the central directory : 0
total number of entries in the central directory on this disk : 2
total number of entries in the central directory : 2
   size of the central directory : 154(0x0000009A)
offset of start of central directory with respect to the starting disk number : 872(0x00000368)
        .ZIP file comment length : 0(0x0000)
&lt;&lt;&lt; test.zip &gt;&gt;&gt; end.

</pre></div><h2><a class="anchor" id="todo">
改善予定</a></h2>
<ul>
<li>extra field の各データ内容をバイトダンプしているが、構造ダンプにする。</li>
</ul>
<h2><a class="anchor" id="links">
リンク</a></h2>
<ul>
<li><a href="http://code.google.com/p/win32cmdx/">http://code.google.com/p/win32cmdx/</a> - zipdump開発サイト</li>
<li><a href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">http://www.pkware.com/documents/casestudies/APPNOTE.TXT</a> - .ZIP File Format Specification</li>
<li><a href="http://www.info-zip.org/doc/appnote-iz-latest.zip">http://www.info-zip.org/doc/appnote-iz-latest.zip</a> - Info-ZIP appnote</li>
</ul>
<h2><a class="anchor" id="download">
ダウンロード</a></h2>
<ul>
<li><a href="http://code.google.com/p/win32cmdx/downloads/list">http://code.google.com/p/win32cmdx/downloads/list</a></li>
</ul>
<h2><a class="anchor" id="changelog">
改訂履歴</a></h2>
<ul>
<li>version-1.1 [Jan 19, 2010] 最新版<ul>
<li>文字列ダンプにて、制御コードを ^@ 形式でエスケープする.</li>
<li>big-endianマシン対応.</li>
<li>Info-ZIPによる "version made by" の解釈を加える.</li>
<li>フルダンプ時は、スキップデータもバイトダンプする.</li>
<li>未知のsignatureレコードを、未知レコードヘッダ＋スキップデータとして出力する.</li>
<li>同一内容のバイトダンプ行出力を抑制するオプション -o を追加した.</li>
</ul>
</li>
<li>version-1.0 [Jan 17, 2010] 公開初版 </li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Jan 20 00:07:59 2010 for win32cmdx by&nbsp;
<a href="http://www.doxygen.org/index.html">
doxygen</a> 1.6.1 </small></address>
</body>
</html>
