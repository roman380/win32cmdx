<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>win32cmdx: zipdump.exe - dump zip file structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="header">
  <div class="headertitle">
<h1>zipdump.exe - dump zip file structure </h1>  </div>
</div>
<div class="contents">
<dl class="version"><dt><b>Version:</b></dt><dd>1.2 (r43)</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Hiroshi Kuno &lt;<a href="http://code.google.com/p/win32cmdx/">http://code.google.com/p/win32cmdx/</a>&gt;</dd></dl>
<dl class="user"><dt><b>License:</b></dt><dd>New BSD License <br/>
Copyright &copy; 2010 by Hiroshi Kuno <br/>
本ソフトウェアは無保証かつ無償で提供します。利用、再配布、改変は自由です。</dd></dl>
<hr/>
 <h2><a class="anchor" id="intro"></a>
はじめに</h2>
<p>zipdumpは、ZIPファイルの構造をダンプ出力するコンソールアプリケーションです。 壊れたZIPファイルの解析に便利です。</p>
<h2><a class="anchor" id="func"></a>
特徴</h2>
<ul>
<li>PKZIP APPNOTE.TXT Version 6.3.2[September 28, 2007] のファイルフォーマット仕様に基づき、構造単位でのダンプを行います。</li>
<li>対象ZIPファイル名に ".zipdump" を付加した名前のテキストファイルを生成し、ダンプ結果を出力します。</li>
</ul>
<h2><a class="anchor" id="env"></a>
動作環境</h2>
<p>Windows2000以降を動作対象としています。 WindowsXP にて動作確認済み。</p>
<h2><a class="anchor" id="install"></a>
インストール方法</h2>
<p>配布ファイル zipdump.exe を、PATHが通ったフォルダにコピーしてください。 アインインストールするには、そのコピーしたファイルを削除してください。</p>
<h2><a class="anchor" id="usage"></a>
使い方</h2>
<div class="fragment"><pre class="fragment">usage :zipdump [-h?fqosr] [-d&lt;DIR&gt;] file1.zip file2.zip ...
  version 1.2 (r43)
  -h -?      this help
  -f         full dump
  -q         quiet mode
  -o         omit same hexdump line
  -s         output to stdout instend of files(*.zipdump)
  -r         recursive search under the input-file's folder(wildcard needed)
  -d&lt;DIR&gt;    output to DIR
  fileN.zip  input-files. wildcard OK
</pre></div><h2><a class="anchor" id="example"></a>
出力例</h2>
<div class="fragment"><pre class="fragment">zipdump -s test.zip 
&lt;&lt;&lt; test.zip &gt;&gt;&gt; begin.
*** zipdump of "test.zip" ***

[Local file header #1] offset : 0(0x0000000000000000)
                header signature : 0x04034B50
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x8B24
              last mod file date : 0x3B43
                                 * 2009-10-03T17:25:08
                          crc-32 : 0xE02D4FB6
                 compressed size : 126(0x0000007E)
               uncompressed size : 139(0x0000008B)
                file name length : 15(0x000F)
              extra field length : 112(0x0070)

[Local file name #1] offset : 30(0x000000000000001E)
version-filt.pl

[Local extra field #1] offset : 45(0x000000000000002D)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 91(0x005B)
       uncompressed SD data size : 164(0x000000A4)
                         version : 0
                compression type : 8
                             crc : 0x909D9CE2
compressed SD data:
; skip compressed SD data(80 bytes), use -f option to dump the data

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 13(0x000D)
                           Flags : 0x07
                   last mod time : 0x4AC70A64
                                 * 2009-10-03T08:25:08 UTC (2009/10/03 17:25:08 東京 (標準時))
                last access time : 0x4BDD803F
                                 * 2010-05-02T13:38:07 UTC (2010/05/02 22:38:07 東京 (標準時))
                last create time : 0x4BDD803F
                                 * 2010-05-02T13:38:07 UTC (2010/05/02 22:38:07 東京 (標準時))

[File data #1] offset : 157(0x000000000000009D)
; skip file data(126 bytes), use -f option to dump the data

[Local file header #2] offset : 283(0x000000000000011B)
                header signature : 0x04034B50
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0xBB9C
              last mod file date : 0x3B43
                                 * 2009-10-03T23:28:56
                          crc-32 : 0x6E1AD785
                 compressed size : 414(0x0000019E)
               uncompressed size : 802(0x00000322)
                file name length : 13(0x000D)
              extra field length : 112(0x0070)

[Local file name #2] offset : 313(0x0000000000000139)
version-up.pl

[Local extra field #2] offset : 326(0x0000000000000146)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 91(0x005B)
       uncompressed SD data size : 164(0x000000A4)
                         version : 0
                compression type : 8
                             crc : 0x909D9CE2
compressed SD data:
; skip compressed SD data(80 bytes), use -f option to dump the data

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 13(0x000D)
                           Flags : 0x07
                   last mod time : 0x4AC75FA8
                                 * 2009-10-03T14:28:56 UTC (2009/10/03 23:28:56 東京 (標準時))
                last access time : 0x4BDD803F
                                 * 2010-05-02T13:38:07 UTC (2010/05/02 22:38:07 東京 (標準時))
                last create time : 0x4BDD803F
                                 * 2010-05-02T13:38:07 UTC (2010/05/02 22:38:07 東京 (標準時))

[File data #2] offset : 438(0x00000000000001B6)
; skip file data(414 bytes), use -f option to dump the data

[Central file header #1] offset : 852(0x0000000000000354)
                header signature : 0x02014B50
                 version made by : 0x0B17
                                 * 11 - MVS (OS/390 - Z/OS) or NTFS(by Info-ZIP)
                                 * ver 2.3
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x8B24
              last mod file date : 0x3B43
                                 * 2009-10-03T17:25:08
                          crc-32 : 0xE02D4FB6
                 compressed size : 126(0x0000007E)
               uncompressed size : 139(0x0000008B)
                file name length : 15(0x000F)
              extra field length : 17(0x0011)
             file comment length : 0(0x0000)
               disk number start : 0
        internal file attributes : 0x0001
                                 * text file
        external file attributes : 0x81B60020
 relative offset of local header : 0(0x00000000)

[file name #1] offset : 898(0x0000000000000382)
version-filt.pl

[extra field #1] offset : 913(0x0000000000000391)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 4(0x0004)
       uncompressed SD data size : 164(0x000000A4)

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 5(0x0005)
                           Flags : 0x07
                   last mod time : 0x4AC70A64
                                 * 2009-10-03T08:25:08 UTC (2009/10/03 17:25:08 東京 (標準時))

[Central file header #2] offset : 930(0x00000000000003A2)
                header signature : 0x02014B50
                 version made by : 0x0B17
                                 * 11 - MVS (OS/390 - Z/OS) or NTFS(by Info-ZIP)
                                 * ver 2.3
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0xBB9C
              last mod file date : 0x3B43
                                 * 2009-10-03T23:28:56
                          crc-32 : 0x6E1AD785
                 compressed size : 414(0x0000019E)
               uncompressed size : 802(0x00000322)
                file name length : 13(0x000D)
              extra field length : 17(0x0011)
             file comment length : 0(0x0000)
               disk number start : 0
        internal file attributes : 0x0001
                                 * text file
        external file attributes : 0x81B60020
 relative offset of local header : 283(0x0000011B)

[file name #2] offset : 976(0x00000000000003D0)
version-up.pl

[extra field #2] offset : 989(0x00000000000003DD)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 4(0x0004)
       uncompressed SD data size : 164(0x000000A4)

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 5(0x0005)
                           Flags : 0x07
                   last mod time : 0x4AC75FA8
                                 * 2009-10-03T14:28:56 UTC (2009/10/03 23:28:56 東京 (標準時))

[End of central directory record] offset : 1006(0x00000000000003EE)
                header signature : 0x06054B50
             number of this disk : 0
      disk of starting directory : 0
  directory-entries on this disk : 2
  directory-entries in all disks : 2
           size of the directory : 154(0x0000009A)
    offset of starting directory : 852(0x00000354)
        .ZIP file comment length : 0(0x0000)
&lt;&lt;&lt; test.zip &gt;&gt;&gt; end.

</pre></div><h2><a class="anchor" id="todo"></a>
改善予定</h2>
<ul>
<li>"zip64 extensible data sector" の構造ダンプを行う.</li>
</ul>
<h2><a class="anchor" id="links"></a>
リンク</h2>
<ul>
<li><a href="http://code.google.com/p/win32cmdx/">http://code.google.com/p/win32cmdx/</a> - zipdump開発サイト</li>
<li><a href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">http://www.pkware.com/documents/casestudies/APPNOTE.TXT</a> - .ZIP File Format Specification</li>
<li><a href="http://www.info-zip.org/doc/appnote-iz-latest.zip">http://www.info-zip.org/doc/appnote-iz-latest.zip</a> - Info-ZIP appnote</li>
</ul>
<h2><a class="anchor" id="download"></a>
ダウンロード</h2>
<ul>
<li><a href="http://code.google.com/p/win32cmdx/downloads/list">http://code.google.com/p/win32cmdx/downloads/list</a></li>
</ul>
<h2><a class="anchor" id="changelog"></a>
改訂履歴</h2>
<ul>
<li>version-1.2 [Jan 28, 2010] 最新版<ul>
<li>主要な extra field を構造ダンプする.</li>
<li>出力ファイルの拡張子を ".zipdump.txt" から ".zipdump" に変更した.</li>
<li>フィールド説明文が32文字を越える箇所は短い文章に改めて、出力レイアウトが崩れないようにした.</li>
</ul>
</li>
<li>version-1.1 [Jan 19, 2010]<ul>
<li>文字列ダンプにて、制御コードを ^@ 形式でエスケープする.</li>
<li>big-endianマシン対応.</li>
<li>Info-ZIPによる "version made by" の解釈を加える.</li>
<li>フルダンプ時は、スキップデータもバイトダンプする.</li>
<li>未知のsignatureレコードを、未知レコードヘッダ＋スキップデータとして出力する.</li>
<li>同一内容のバイトダンプ行出力を抑制するオプション -o を追加した.</li>
</ul>
</li>
<li>version-1.0 [Jan 17, 2010] 公開初版 </li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Oct 10 2010 19:15:41 for win32cmdx by&#160;
<a href="http://www.doxygen.org/index.html">
doxygen</a> 1.7.2 </small></address>
</body>
</html>
