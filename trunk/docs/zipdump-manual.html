<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>win32cmdx: zipdump.exe - dump zip file structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="contents">


<h1><a class="anchor" id="zipdump-manual">zipdump.exe - dump zip file structure </a></h1><dl class="version"><dt><b>Version:</b></dt><dd>1.2 (r43)</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Hiroshi Kuno &lt;<a href="http://code.google.com/p/win32cmdx/">http://code.google.com/p/win32cmdx/</a>&gt;</dd></dl>
<dl class="user"><dt><b>License:</b></dt><dd>New BSD License <br/>
Copyright &copy; 2010 by Hiroshi Kuno <br/>
本ソフトウェアは無保証かつ無償で提供します。利用、再配布、改変は自由です。</dd></dl>
<hr/>
 <h2><a class="anchor" id="intro">
はじめに</a></h2>
<p>zipdumpは、ZIPファイルの構造をダンプ出力するコンソールアプリケーションです。 壊れたZIPファイルの解析に便利です。</p>
<h2><a class="anchor" id="func">
特徴</a></h2>
<ul>
<li>PKZIP APPNOTE.TXT Version 6.3.2[September 28, 2007] のファイルフォーマット仕様に基づき、構造単位でのダンプを行います。</li>
<li>対象ZIPファイル名に ".zipdump" を付加した名前のテキストファイルを生成し、ダンプ結果を出力します。</li>
</ul>
<h2><a class="anchor" id="env">
動作環境</a></h2>
<p>Windows2000以降を動作対象としています。 WindowsXP にて動作確認済み。</p>
<h2><a class="anchor" id="install">
インストール方法</a></h2>
<p>配布ファイル zipdump.exe を、PATHが通ったフォルダにコピーしてください。 アインインストールするには、そのコピーしたファイルを削除してください。</p>
<h2><a class="anchor" id="usage">
使い方</a></h2>
<div class="fragment"><pre class="fragment">usage :zipdump [-h?fqosr] [-d&lt;DIR&gt;] file1.zip file2.zip ...
  version 1.2 (r43)
  -h -?      this help
  -f         full dump
  -q         quiet mode
  -o         omit same hexdump line
  -s         output to stdout instend of files(*.zipdump)
  -r         recursive search under the input-file's folder(wildcard needed)
  -d&lt;DIR&gt;    output to DIR
  fileN.zip  input-files. wildcard OK
</pre></div><h2><a class="anchor" id="example">
出力例</a></h2>
<div class="fragment"><pre class="fragment">zipdump -s test.zip 
&lt;&lt;&lt; test.zip &gt;&gt;&gt; begin.
*** zipdump of "test.zip" ***

[Local file header #1] offset : 0(0x0000000000000000)
                header signature : 0x04034B50
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x51F1
              last mod file date : 0x3C32
                                 * 2010-01-18T10:15:34
                          crc-32 : 0xE02D4FB6
                 compressed size : 126(0x0000007E)
               uncompressed size : 139(0x0000008B)
                file name length : 15(0x000F)
              extra field length : 123(0x007B)

[Local file name #1] offset : 30(0x000000000000001E)
version-filt.pl

[Local extra field #1] offset : 45(0x000000000000002D)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 102(0x0066)
       uncompressed SD data size : 188(0x000000BC)
                         version : 0
                compression type : 8
                             crc : 0x05E9D561
compressed SD data:
; skip compressed SD data(91 bytes), use -f option to dump the data

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 13(0x000D)
                           Flags : 0x07
                   last mod time : 0x4B53B636
                                 * 2010-01-18T01:15:34 UTC (2010/01/18 10:15:34 JST)
                last access time : 0x4BB58510
                                 * 2010-04-02T05:48:00 UTC (2010/04/02 14:48:00 JST)
                last create time : 0x4B53B636
                                 * 2010-01-18T01:15:34 UTC (2010/01/18 10:15:34 JST)

[File data #1] offset : 168(0x00000000000000A8)
; skip file data(126 bytes), use -f option to dump the data

[Local file header #2] offset : 294(0x0000000000000126)
                header signature : 0x04034B50
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x51F1
              last mod file date : 0x3C32
                                 * 2010-01-18T10:15:34
                          crc-32 : 0x6E1AD785
                 compressed size : 414(0x0000019E)
               uncompressed size : 802(0x00000322)
                file name length : 13(0x000D)
              extra field length : 123(0x007B)

[Local file name #2] offset : 324(0x0000000000000144)
version-up.pl

[Local extra field #2] offset : 337(0x0000000000000151)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 102(0x0066)
       uncompressed SD data size : 188(0x000000BC)
                         version : 0
                compression type : 8
                             crc : 0x05E9D561
compressed SD data:
; skip compressed SD data(91 bytes), use -f option to dump the data

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 13(0x000D)
                           Flags : 0x07
                   last mod time : 0x4B53B636
                                 * 2010-01-18T01:15:34 UTC (2010/01/18 10:15:34 JST)
                last access time : 0x4BB58510
                                 * 2010-04-02T05:48:00 UTC (2010/04/02 14:48:00 JST)
                last create time : 0x4B53B636
                                 * 2010-01-18T01:15:34 UTC (2010/01/18 10:15:34 JST)

[File data #2] offset : 460(0x00000000000001CC)
; skip file data(414 bytes), use -f option to dump the data

[Central file header #1] offset : 874(0x000000000000036A)
                header signature : 0x02014B50
                 version made by : 0x0B17
                                 * 11 - MVS (OS/390 - Z/OS) or NTFS(by Info-ZIP)
                                 * ver 2.3
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x51F1
              last mod file date : 0x3C32
                                 * 2010-01-18T10:15:34
                          crc-32 : 0xE02D4FB6
                 compressed size : 126(0x0000007E)
               uncompressed size : 139(0x0000008B)
                file name length : 15(0x000F)
              extra field length : 17(0x0011)
             file comment length : 0(0x0000)
               disk number start : 0
        internal file attributes : 0x0001
                                 * text file
        external file attributes : 0x81B60020
 relative offset of local header : 0(0x00000000)

[file name #1] offset : 920(0x0000000000000398)
version-filt.pl

[extra field #1] offset : 935(0x00000000000003A7)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 4(0x0004)
       uncompressed SD data size : 188(0x000000BC)

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 5(0x0005)
                           Flags : 0x07
                   last mod time : 0x4B53B636
                                 * 2010-01-18T01:15:34 UTC (2010/01/18 10:15:34 JST)

[Central file header #2] offset : 952(0x00000000000003B8)
                header signature : 0x02014B50
                 version made by : 0x0B17
                                 * 11 - MVS (OS/390 - Z/OS) or NTFS(by Info-ZIP)
                                 * ver 2.3
       version needed to extract : 0x0014
                                 * 0 - MS-DOS and OS/2 (FAT / VFAT / FAT32 file systems)
                                 * ver 2.0
        general purpose bit flag : 0x0000
              compression method : 0x0008
              last mod file time : 0x51F1
              last mod file date : 0x3C32
                                 * 2010-01-18T10:15:34
                          crc-32 : 0x6E1AD785
                 compressed size : 414(0x0000019E)
               uncompressed size : 802(0x00000322)
                file name length : 13(0x000D)
              extra field length : 17(0x0011)
             file comment length : 0(0x0000)
               disk number start : 0
        internal file attributes : 0x0001
                                 * text file
        external file attributes : 0x81B60020
 relative offset of local header : 294(0x00000126)

[file name #2] offset : 998(0x00000000000003E6)
version-up.pl

[extra field #2] offset : 1011(0x00000000000003F3)

[-Windows NT Security Descriptor Extra Field]
                       extra tag : 0x4453
                      extra size : 4(0x0004)
       uncompressed SD data size : 188(0x000000BC)

[-Extended Timestamp Extra Field]
                       extra tag : 0x5455
                      extra size : 5(0x0005)
                           Flags : 0x07
                   last mod time : 0x4B53B636
                                 * 2010-01-18T01:15:34 UTC (2010/01/18 10:15:34 JST)

[End of central directory record] offset : 1028(0x0000000000000404)
                header signature : 0x06054B50
             number of this disk : 0
      disk of starting directory : 0
  directory-entries on this disk : 2
  directory-entries in all disks : 2
           size of the directory : 154(0x0000009A)
    offset of starting directory : 874(0x0000036A)
        .ZIP file comment length : 0(0x0000)
&lt;&lt;&lt; test.zip &gt;&gt;&gt; end.

</pre></div><h2><a class="anchor" id="todo">
改善予定</a></h2>
<ul>
<li>"zip64 extensible data sector" の構造ダンプを行う.</li>
</ul>
<h2><a class="anchor" id="links">
リンク</a></h2>
<ul>
<li><a href="http://code.google.com/p/win32cmdx/">http://code.google.com/p/win32cmdx/</a> - zipdump開発サイト</li>
<li><a href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">http://www.pkware.com/documents/casestudies/APPNOTE.TXT</a> - .ZIP File Format Specification</li>
<li><a href="http://www.info-zip.org/doc/appnote-iz-latest.zip">http://www.info-zip.org/doc/appnote-iz-latest.zip</a> - Info-ZIP appnote</li>
</ul>
<h2><a class="anchor" id="download">
ダウンロード</a></h2>
<ul>
<li><a href="http://code.google.com/p/win32cmdx/downloads/list">http://code.google.com/p/win32cmdx/downloads/list</a></li>
</ul>
<h2><a class="anchor" id="changelog">
改訂履歴</a></h2>
<ul>
<li>version-1.2 [Jan 28, 2010] 最新版<ul>
<li>主要な extra field を構造ダンプする.</li>
<li>出力ファイルの拡張子を ".zipdump.txt" から ".zipdump" に変更した.</li>
<li>フィールド説明文が32文字を越える箇所は短い文章に改めて、出力レイアウトが崩れないようにした.</li>
</ul>
</li>
<li>version-1.1 [Jan 19, 2010]<ul>
<li>文字列ダンプにて、制御コードを ^@ 形式でエスケープする.</li>
<li>big-endianマシン対応.</li>
<li>Info-ZIPによる "version made by" の解釈を加える.</li>
<li>フルダンプ時は、スキップデータもバイトダンプする.</li>
<li>未知のsignatureレコードを、未知レコードヘッダ＋スキップデータとして出力する.</li>
<li>同一内容のバイトダンプ行出力を抑制するオプション -o を追加した.</li>
</ul>
</li>
<li>version-1.0 [Jan 17, 2010] 公開初版 </li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Apr 2 14:48:50 2010 for win32cmdx by&nbsp;
<a href="http://www.doxygen.org/index.html">
doxygen</a> 1.6.3 </small></address>
</body>
</html>
